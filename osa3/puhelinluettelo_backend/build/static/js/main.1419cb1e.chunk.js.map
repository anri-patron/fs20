{"version":3,"sources":["components/Filter.js","services/persons.js","components/PersonForm.js","components/PhoneNumbers.js","App.js","index.js"],"names":["Filter","filter","setNewFilter","setShowAll","value","onChange","event","console","log","target","length","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setNotificationMsg","setErrorMsg","onSubmit","preventDefault","findIndex","person","name","window","confirm","find","p","newPerson","number","personService","returnedPerson","setTimeout","map","catch","error","concat","type","PhoneNumbers","showAll","numbersToShow","toLowerCase","includes","i","key","onClick","personToDelete","pop","x","newPersons","alert","handleDelete","Notification","message","className","Error","App","useState","notificationMsg","errorMsg","useEffect","initialNumbers","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1419cb1e.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({filter, setNewFilter, setShowAll}) => {\n\n    // jos filter palkkii on kirjoitettu niin asetetaan showAll = false\n    // jos palkki tyhjenee niin asetetaan showAll = true\n    const handleFilterChange = (event) => {\n        console.log('filter: ', event.target.value)\n        console.log(event.target.value.length)\n        setNewFilter(event.target.value)\n        if (event.target.value.length !== 0) {\n          setShowAll(false)\n        } else {\n          setShowAll(true)\n        }\n      }\n\nreturn (\n    <div>\n        filter shown with: <input\n        value={filter}\n        onChange={handleFilterChange}\n        />\n    </div>\n  )\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson}","import React from 'react'\nimport personService from '../services/persons'\n\nconst PersonForm = ({ persons, setPersons, newName, setNewName, newNumber, setNewNumber, setNotificationMsg, setErrorMsg}) => {\n\n  const addPhoneNumber = (event) => {\n    event.preventDefault()\n\n    // tarkistetaan ettei lisättävä nimi ole jo puhelinluettelossa\n    const i = persons.findIndex(person => person.name === newName)\n    if (i !== -1) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        console.log('Replace number')\n        const person = persons.find(p => p.name === newName)\n        console.log('person:', person)\n        const newPerson = { ...person, number: newNumber }\n        console.log('uusi person:', newPerson)\n\n      // päivitetään person, tässä on bugi: sisäisen tilan henkilön id ei muodostu ennen kuin lisäyksen jälkeen on ladattu sivu uudestaan.\n      // siksi jos yrittää päivittää juuri luotua henkilö saa aikaan 404:n\n        personService\n      .update(newPerson.id, newPerson)\n      .then(returnedPerson => {\n        setNotificationMsg(`Updated ${newName}`)\n        setTimeout(() => {\n          setNotificationMsg(null)\n        }, 2000)\n        setPersons(persons.map(p => p.id !== newPerson.id ? p : returnedPerson))\n      })\n      .catch(error => {\n        setErrorMsg(`${newName} has already been deleted from server.`)\n        setTimeout(() => {\n          setErrorMsg(null)\n        }, 4000)\n        setPersons(persons.filter(p => p.id !== newPerson.id))\n      })\n      } else console.log('cancel replacing')\n\n    } else {\n      const newObject = {\n        name: newName,\n        number: newNumber,\n        //id: persons.length + 1,\n      }\n      // upataan uusi entry serverille\n      personService\n      .create(newObject)\n      .then(returnedPerson => {\n        console.log('luotiin', returnedPerson)\n        setNotificationMsg(`Added ${newObject.name}`)\n        setTimeout(() => {\n          setNotificationMsg(null)\n        }, 2000)\n        setPersons(persons.concat(newObject))\n        setNewName('')\n        setNewNumber('')\n      })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    console.log('nimi: ', event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log('numero: ', event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <form onSubmit={addPhoneNumber}>\n      <div>\n        name: <input\n          value={newName}\n          onChange={handleNameChange}\n        />\n      </div>\n      <div>\n        number: <input\n          value={newNumber}\n          onChange={handleNumberChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\nimport personService from '../services/persons'\n\nconst PhoneNumbers = ({ persons, filter, showAll, setPersons, setNotificationMsg }) => {\n    \n\n    // kun showAll === false filteröi puhelinluettelo\n    const numbersToShow = showAll\n        ? persons\n        : persons.filter(person => person.name.toLowerCase().includes(filter))\n    const handleDelete = (name) => {\n        \n        // varmistetaan haluaako käyttäjä poistaa henkilön\n        if (window.confirm(`Delete ${name}`)) {\n            const personToDelete = persons.filter(person => person.name === name).pop()\n            console.log('deleting:', personToDelete)\n            personService.deletePerson(personToDelete.id)\n            .then(x => {\n                console.log('Deleted', name)\n                setNotificationMsg(`Deleted ${name}`)\n                setTimeout(() => {\n                    setNotificationMsg(null)\n                }, 2000)\n                // päivitetään sisäinen tila\n                const newPersons = persons.filter(person => person.name !== name)\n                console.log('asetetaan sisäinen tila', newPersons)\n                setPersons(newPersons)\n            })\n            .catch(error => {\n                alert(`Something went wrong, sorry about that`)\n              })\n        } else console.log(\"cancel\")\n\n    }\n    return (\n        <ul>\n            {numbersToShow.map((person, i) => <li key={i}>{`${person.name} ${person.number}`}<button onClick={() => handleDelete(person.name)}>delete</button></li>)}\n        </ul>\n    )\n}\n\nexport default PhoneNumbers","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport PhoneNumbers from './components/PhoneNumbers'\nimport personService from './services/persons'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nconst Error = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setNewFilter] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [notificationMsg, setNotificationMsg] = useState(null)\n  const [errorMsg, setErrorMsg] = useState(null)\n\n  // haetaan numerot palvelimelta\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(initialNumbers => {\n      setPersons(initialNumbers)\n    })\n  }, [])\n\n  return (\n    <div>\n      <Notification message={notificationMsg}/>\n      <Error message={errorMsg}/>\n      <h2>Phonebook</h2>\n      <Filter filter={filter} setNewFilter={setNewFilter} setShowAll={setShowAll} />\n      <h2>Add a new</h2>\n      <PersonForm\n      persons={persons}\n      setPersons={setPersons}\n      newName={newName}\n      setNewName={setNewName}\n      newNumber={newNumber}\n      setNewNumber={setNewNumber}\n      setNotificationMsg={setNotificationMsg}\n      setErrorMsg={setErrorMsg}\n      />\n      <h2>Numbers</h2>\n      <PhoneNumbers persons={persons} filter={filter} showAll={showAll} setPersons={setPersons} setNotificationMsg={setNotificationMsg}/>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}
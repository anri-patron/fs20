(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(14),r=n.n(l),c=n(2),u=function(e){var t=e.filter,n=e.setNewFilter,a=e.setShowAll;return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:t,onChange:function(e){console.log("filter: ",e.target.value),console.log(e.target.value.length),n(e.target.value),0!==e.target.value.length?a(!1):a(!0)}}))},i=n(4),s=n(3),m=n.n(s),f="/api/persons",d=function(){return m.a.get(f).then((function(e){return e.data}))},g=function(e){return m.a.post(f,e).then((function(e){return e.data}))},b=function(e,t){return m.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.persons,n=e.setPersons,a=e.newName,l=e.setNewName,r=e.newNumber,c=e.setNewNumber,u=e.setNotificationMsg,s=e.setErrorMsg;return o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),-1!==t.findIndex((function(e){return e.name===a})))if(window.confirm("".concat(a," is already added to phonebook, replace the old number with a new one?"))){console.log("Replace number");var o=t.find((function(e){return e.name===a}));console.log("person:",o);var m=Object(i.a)(Object(i.a)({},o),{},{number:r});console.log("uusi person:",m),b(m.id,m).then((function(e){u("Updated ".concat(a)),setTimeout((function(){u(null)}),2e3),n(t.map((function(t){return t.id!==m.id?t:e})))})).catch((function(e){s("".concat(a," has already been deleted from server.")),setTimeout((function(){s(null)}),4e3),n(t.filter((function(e){return e.id!==m.id})))}))}else console.log("cancel replacing");else{var f={name:a,number:r};g(f).then((function(e){console.log("luotiin",e),u("Added ".concat(f.name)),setTimeout((function(){u(null)}),2e3),n(t.concat(f)),l(""),c("")}))}}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:a,onChange:function(e){console.log("nimi: ",e.target.value),l(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:r,onChange:function(e){console.log("numero: ",e.target.value),c(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.persons,n=e.filter,a=e.showAll,l=e.setPersons,r=e.setNotificationMsg,c=a?t:t.filter((function(e){return e.name.toLowerCase().includes(n)}));return o.a.createElement("ul",null,c.map((function(e,n){return o.a.createElement("li",{key:n},"".concat(e.name," ").concat(e.number),o.a.createElement("button",{onClick:function(){return function(e){if(window.confirm("Delete ".concat(e))){var n=t.filter((function(t){return t.name===e})).pop();console.log("deleting:",n),h(n.id).then((function(n){console.log("Deleted",e),r("Deleted ".concat(e)),setTimeout((function(){r(null)}),2e3);var a=t.filter((function(t){return t.name!==e}));console.log("asetetaan sis\xe4inen tila",a),l(a)})).catch((function(e){alert("Something went wrong, sorry about that")}))}else console.log("cancel")}(e.name)}},"delete"))})))},E=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"notification"},t)},w=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"error"},t)},N=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(""),i=Object(c.a)(r,2),s=i[0],m=i[1],f=Object(a.useState)(""),g=Object(c.a)(f,2),b=g[0],h=g[1],N=Object(a.useState)(""),j=Object(c.a)(N,2),O=j[0],S=j[1],M=Object(a.useState)(!0),k=Object(c.a)(M,2),y=k[0],A=k[1],C=Object(a.useState)(null),P=Object(c.a)(C,2),D=P[0],T=P[1],x=Object(a.useState)(null),F=Object(c.a)(x,2),I=F[0],J=F[1];return Object(a.useEffect)((function(){d().then((function(e){l(e)}))}),[]),o.a.createElement("div",null,o.a.createElement(E,{message:D}),o.a.createElement(w,{message:I}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(u,{filter:O,setNewFilter:S,setShowAll:A}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(p,{persons:n,setPersons:l,newName:s,setNewName:m,newNumber:b,setNewNumber:h,setNotificationMsg:T,setErrorMsg:J}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(v,{persons:n,filter:O,showAll:y,setPersons:l,setNotificationMsg:T}))};n(37);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1419cb1e.chunk.js.map